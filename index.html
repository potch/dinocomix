<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
    <title>Dino Comix Viewer</title>
    <style>
      body {
        background: #000;
      }
      div {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
      }
      div.p1 {

      }
    </style>
  </head>
  <body>
    <div id="comic">
      <h1>URL ARGUMENTS</h1>
      <pre>
c:    comic #
p:    panel #
auto: 1 or 0, whether or not to advance through the comic

example:  http://potch.github.io/dinocomix/?c=2498&p=6&auto=0
      </pre>
    </div>
    <script src="node_modules/js-snippets/snippets.js"></script>
    <script>
      var params = snippets.queryParams(location.href);
      var id = params.c;
      var panel = (params.p||0)|0;
      var auto = params.auto;
      var el = document.querySelector('#comic');
      var url = 'url(http://www.qwantz.com/comics/comic2-' + id + '.png)';

      function go(p) {      
        switch (panel) {
          case 1:
            el.style.backgroundImage = '-moz-image-rect(' + url + ', 0, 244, 244, 0)';
            break;
          case 2:
            el.style.backgroundImage = '-moz-image-rect(' + url + ', 0, 375, 244, 242)';
            break;
          case 3:
            el.style.backgroundImage = '-moz-image-rect(' + url + ', 0, 735, 244, 373)';
            break;
          case 4:
            el.style.backgroundImage = '-moz-image-rect(' + url + ', 242, 196, 487, 0)';
            break;
          case 5:
            el.style.backgroundImage = '-moz-image-rect(' + url + ', 242, 494, 487, 194)';
            break;
          case 6:
            el.style.backgroundImage = '-moz-image-rect(' + url + ', 242, 735, 487, 492)';
            break;
          default:
            el.style.backgroundImage = url;
            break;
        }
      }

      if (id) {
        el.innerHTML = "";
      }

      if (auto) {
        panel = 1;
        setInterval(function() {
          panel = panel + 1;
          if (panel > 6) panel = 1;
          go(panel);
        }, 5000);
        go(panel);
      } else {
        go(panel);
      }

    </script>
  </body>
</html>
